<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Interactive Studio for Explanatory Model Analysis — modelStudio • modelStudio</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- dalexverse -->
<link href="../dalexverse.css" rel="stylesheet">
<link href="../dalexverse-2.css" rel="stylesheet">

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>






<meta property="og:title" content="Interactive Studio for Explanatory Model Analysis — modelStudio" />
<meta property="og:description" content="This function computes various (instance and dataset level) model explanations and produces an interactive,
customizable dashboard made with D3.js. It consists of multiple panels for plots with their short descriptions.
Easily save and share the dashboard with others. Tools for model exploration unite with tools for EDA
(Exploratory Data Analysis) to give a broad overview of the model behavior.
Theoretical introduction to the plots: Explanatory Model Analysis: Explore, Explain and Examine Predictive Models" />
<meta property="og:image" content="/logo.png" />

<meta name="robots" content="noindex" />


<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- google analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-5650686-14""></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-5650686-14');
</script>

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">modelStudio</a>
        <div class="info">
          <span class="partof">part of the <a href="https://github.com/ModelOriented/DrWhy">DrWhy.AI</a>
           developed by the <a href="https://mi2.mini.pw.edu.pl/">MI^2 DataLab</a> </span>
          <span class="version version-default">1.0.2.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/ms-perks-features.html">modelStudio - perks and features</a>
    </li>
    <li>
      <a href="../articles/ms-r-python-examples.html">modelStudio - R &amp; Python examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ModelOriented/modelStudio/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Interactive Studio for Explanatory Model Analysis</h1>
    <small class="dont-index">Source: <a href='https://github.com/ModelOriented/modelStudio/blob/master/R/modelStudio.R'><code>R/modelStudio.R</code></a></small>
    <div class="hidden name"><code>modelStudio.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function computes various (instance and dataset level) model explanations and produces an interactive,
customizable dashboard made with D3.js. It consists of multiple panels for plots with their short descriptions.
Easily save and share the dashboard with others. Tools for model exploration unite with tools for EDA
(Exploratory Data Analysis) to give a broad overview of the model behavior.</p>
<p>Theoretical introduction to the plots: <a href='https://pbiecek.github.io/ema/'>Explanatory Model Analysis: Explore, Explain and Examine Predictive Models</a></p>
    </div>

    <pre class="usage"><span class='fu'>modelStudio</span>(<span class='no'>explainer</span>, <span class='no'>...</span>)

<span class='co'># S3 method for explainer</span>
<span class='fu'>modelStudio</span>(
  <span class='no'>explainer</span>,
  <span class='kw'>new_observation</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>new_observation_y</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>facet_dim</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2</span>, <span class='fl'>2</span>),
  <span class='kw'>time</span> <span class='kw'>=</span> <span class='fl'>500</span>,
  <span class='kw'>max_features</span> <span class='kw'>=</span> <span class='fl'>10</span>,
  <span class='kw'>N</span> <span class='kw'>=</span> <span class='fl'>400</span>,
  <span class='kw'>B</span> <span class='kw'>=</span> <span class='fl'>15</span>,
  <span class='kw'>eda</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>show_info</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>options</span> <span class='kw'>=</span> <span class='fu'><a href='modelStudioOptions.html'>modelStudioOptions</a></span>(),
  <span class='kw'>viewer</span> <span class='kw'>=</span> <span class='st'>"external"</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>explainer</th>
      <td><p>An <code>explainer</code> created with <code><a href='https://rdrr.io/pkg/DALEX/man/explain.html'>DALEX::explain()</a></code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other parameters.</p></td>
    </tr>
    <tr>
      <th>new_observation</th>
      <td><p>A new observation with columns that correspond to variables used in the model.</p></td>
    </tr>
    <tr>
      <th>new_observation_y</th>
      <td><p>True label for <code>new_observation</code> (optional).</p></td>
    </tr>
    <tr>
      <th>facet_dim</th>
      <td><p>Dimensions of the grid. Default is <code><a href='https://rdrr.io/r/base/c.html'>c(2,2)</a></code>.</p></td>
    </tr>
    <tr>
      <th>time</th>
      <td><p>Time in ms. Set animation length. Default is <code>500</code>.</p></td>
    </tr>
    <tr>
      <th>max_features</th>
      <td><p>Maximum number of features to be included in Break Down and Shapley Values plots. Default is <code>10</code>.</p></td>
    </tr>
    <tr>
      <th>N</th>
      <td><p>Number of observations used for calculation of partial dependence profiles. Default is <code>400</code>.</p></td>
    </tr>
    <tr>
      <th>B</th>
      <td><p>Number of random paths used for calculation of Shapley values. Default is <code>15</code>.</p></td>
    </tr>
    <tr>
      <th>eda</th>
      <td><p>Compute EDA plots. Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>show_info</th>
      <td><p>Verbose progress on the console. Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>Speed up the computation using <code><a href='https://parallelmap.mlr-org.com/reference/parallelMap.html'>parallelMap::parallelMap()</a></code>.
See <a href='https://modeloriented.github.io/modelStudio/articles/ms-perks-features.html#parallel-computation'><b>vignette</b></a>.
This might interfere with showing progress using <code>show_info</code>.</p></td>
    </tr>
    <tr>
      <th>options</th>
      <td><p>Customize <code>modelStudio</code>. See <code><a href='modelStudioOptions.html'>modelStudioOptions</a></code> and
<a href='https://modeloriented.github.io/modelStudio/articles/ms-perks-features.html#plot-options'><b>vignette</b></a>.</p></td>
    </tr>
    <tr>
      <th>viewer</th>
      <td><p>Default is <code>external</code> to display in an external RStudio window.
Use <code>browser</code> to display in an external browser or
<code>internal</code> to use the RStudio internal viewer pane for output.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of the <code>r2d3</code> class.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
<ul>
<li><p>The input object is implemented in <a href='https://modeloriented.github.io/DALEX/'><b>DALEX</b></a></p></li>
<li><p>Feature Importance, Ceteris Paribus, Partial Dependence and Accumulated Dependence plots
are implemented in <a href='https://modeloriented.github.io/ingredients/'><b>ingredients</b></a></p></li>
<li><p>Break Down and Shapley Values plots are implemented in <a href='https://modeloriented.github.io/iBreakDown/'><b>iBreakDown</b></a></p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Vignettes: <a href='https://modeloriented.github.io/modelStudio/articles/ms-r-python-examples.html'><b>modelStudio - R &amp; Python examples</b></a>
and <a href='https://modeloriented.github.io/modelStudio/articles/ms-perks-features.html'><b>modelStudio - perks and features</b></a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='st'>"DALEX"</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='st'>"modelStudio"</span>)

<span class='co'>#:# ex1 classification on 'titanic_imputed' dataset</span>

<span class='co'># fit a model</span>
<span class='no'>model_titanic</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/glm.html'>glm</a></span>(<span class='no'>survived</span> ~<span class='no'>.</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>titanic_imputed</span>, <span class='kw'>family</span> <span class='kw'>=</span> <span class='st'>"binomial"</span>)

<span class='co'># create an explainer for the model</span>
<span class='no'>explainer_titanic</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/DALEX/man/explain.html'>explain</a></span>(<span class='no'>model_titanic</span>,
                             <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>titanic_imputed</span>,
                             <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>titanic_imputed</span>$<span class='no'>survived</span>,
                             <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"Titanic GLM"</span>)

<span class='co'># pick observations</span>
<span class='no'>new_observations</span> <span class='kw'>&lt;-</span> <span class='no'>titanic_imputed</span>[<span class='fl'>1</span>:<span class='fl'>2</span>,]
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span>(<span class='no'>new_observations</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Lucas"</span>,<span class='st'>"James"</span>)

<span class='co'># make a studio for the model</span>
<span class='fu'>modelStudio</span>(<span class='no'>explainer_titanic</span>,
            <span class='no'>new_observations</span>,
            <span class='kw'>N</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>B</span> <span class='kw'>=</span> <span class='fl'>10</span>) <span class='co'># faster example</span>

<span class='co'># \donttest{</span>

<span class='co'>#:# ex2 regression on 'apartments' dataset</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='st'>"randomForest"</span>)

<span class='no'>model_apartments</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/randomForest/man/randomForest.html'>randomForest</a></span>(<span class='no'>m2.price</span> ~<span class='no'>.</span> ,<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>apartments</span>)

<span class='no'>explainer_apartments</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/DALEX/man/explain.html'>explain</a></span>(<span class='no'>model_apartments</span>,
                                <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>apartments</span>,
                                <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>apartments</span>$<span class='no'>m2.price</span>)

<span class='no'>new_apartments</span> <span class='kw'>&lt;-</span> <span class='no'>apartments</span>[<span class='fl'>1</span>:<span class='fl'>2</span>,]
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span>(<span class='no'>new_apartments</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"ap1"</span>,<span class='st'>"ap2"</span>)

<span class='co'># change dashboard dimensions and animation length</span>
<span class='fu'>modelStudio</span>(<span class='no'>explainer_apartments</span>,
            <span class='no'>new_apartments</span>,
            <span class='kw'>facet_dim</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2</span>, <span class='fl'>3</span>),
            <span class='kw'>time</span> <span class='kw'>=</span> <span class='fl'>800</span>)

<span class='co'># add information about true labels</span>
<span class='fu'>modelStudio</span>(<span class='no'>explainer_apartments</span>,
            <span class='no'>new_apartments</span>,
            <span class='kw'>new_observation_y</span> <span class='kw'>=</span> <span class='no'>new_apartments</span>$<span class='no'>m2.price</span>)

<span class='co'># don't compute EDA plots</span>
<span class='fu'>modelStudio</span>(<span class='no'>explainer_apartments</span>,
            <span class='kw'>eda</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)


<span class='co'>#:# ex3 xgboost model on 'HR' dataset</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='st'>"xgboost"</span>)

<span class='co'># fit a model</span>
<span class='no'>HR_matrix</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/model.matrix.html'>model.matrix</a></span>(<span class='no'>status</span> <span class='kw'>==</span> <span class='st'>"fired"</span> ~ <span class='no'>.</span> -<span class='fl'>1</span>, <span class='no'>HR</span>)

<span class='no'>xgb_matrix</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/xgboost/man/xgb.DMatrix.html'>xgb.DMatrix</a></span>(<span class='no'>HR_matrix</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='no'>HR</span>$<span class='no'>status</span> <span class='kw'>==</span> <span class='st'>"fired"</span>)

<span class='no'>params</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>max_depth</span> <span class='kw'>=</span> <span class='fl'>7</span>, <span class='kw'>objective</span> <span class='kw'>=</span> <span class='st'>"binary:logistic"</span>, <span class='kw'>eval_metric</span> <span class='kw'>=</span> <span class='st'>"auc"</span>)

<span class='no'>model_HR</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/xgboost/man/xgb.train.html'>xgb.train</a></span>(<span class='no'>params</span>, <span class='no'>xgb_matrix</span>, <span class='kw'>nrounds</span> <span class='kw'>=</span> <span class='fl'>300</span>)

<span class='co'># create an explainer for the model</span>
<span class='no'>explainer_HR</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/DALEX/man/explain.html'>explain</a></span>(<span class='no'>model_HR</span>,
                        <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>HR_matrix</span>,
                        <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>HR</span>$<span class='no'>status</span> <span class='kw'>==</span> <span class='st'>"fired"</span>,
                        <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"xgboost"</span>)

<span class='co'># pick observations</span>
<span class='no'>new_observation</span> <span class='kw'>&lt;-</span> <span class='no'>HR_matrix</span>[<span class='fl'>1</span>:<span class='fl'>2</span>, , <span class='kw'>drop</span><span class='kw'>=</span><span class='fl'>FALSE</span>]
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span>(<span class='no'>new_observation</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"id1"</span>, <span class='st'>"id2"</span>)
<span class='co'># make a studio for the model</span>
<span class='fu'>modelStudio</span>(<span class='no'>explainer_HR</span>,
            <span class='no'>new_observation</span>)

<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Hubert Baniecki, Przemyslaw Biecek.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


