<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>modelStudio - perks and features • modelStudio</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../dalexverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../dalexverse-2.css" rel="stylesheet">
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="modelStudio - perks and features">
<meta property="og:description" content="modelStudio">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- google analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-5650686-14"></script><script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-5650686-14');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">modelStudio</a>
        <div class="info">
          <span class="partof">part of the <a href="https://github.com/ModelOriented/DrWhy">DrWhy.AI</a>
           developed by the <a href="https://mi2.mini.pw.edu.pl/">MI^2 DataLab</a> </span>
          <span class="version version-default">1.0.1</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/vignette_modelStudio.html">modelStudio - perks and features</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ModelOriented/modelStudio/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>modelStudio - perks and features</h1>
                        <h4 class="author">Hubert Baniecki</h4>
            
            <h4 class="date">2020-03-21</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ModelOriented/modelStudio/blob/master/vignettes/vignette_modelStudio.Rmd"><code>vignettes/vignette_modelStudio.Rmd</code></a></small>
      <div class="hidden name"><code>vignette_modelStudio.Rmd</code></div>

    </div>

    
    
<p><code><a href="../reference/modelStudio.html">modelStudio::modelStudio</a></code> computes various (instance and dataset level) model explanations and produces an interactive, customisable dashboard made with D3.js. It consists of multiple panels for plots with their short descriptions. Easily save and share the dashboard with others. Tools for model exploration unite with tools for EDA (Exploratory Data Analysis) to give a broad overview of the model behavior.</p>
<p>Let’s use <code><a href="https://rdrr.io/pkg/DALEX/man/HR.html">DALEX::HR</a></code> dataset to explore <code>modelStudio</code> parameters:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>train &lt;-<span class="st"> </span>DALEX<span class="op">::</span>HR[<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>,]</span>
<span id="cb1-2"><a href="#cb1-2"></a>train<span class="op">$</span>fired &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(train<span class="op">$</span>status <span class="op">==</span><span class="st"> "fired"</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a>train &lt;-<span class="st"> </span>train[,<span class="op">-</span><span class="dv">6</span>]</span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(train)</span></code></pre></div>
<table class="table">
<caption>DALEX::HR dataset</caption>
<thead><tr class="header">
<th align="left">gender</th>
<th align="right">age</th>
<th align="right">hours</th>
<th align="right">evaluation</th>
<th align="right">salary</th>
<th align="right">fired</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">male</td>
<td align="right">32.58</td>
<td align="right">41.89</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">female</td>
<td align="right">41.21</td>
<td align="right">36.34</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">male</td>
<td align="right">37.71</td>
<td align="right">36.82</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">female</td>
<td align="right">30.06</td>
<td align="right">38.96</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">male</td>
<td align="right">21.10</td>
<td align="right">62.15</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">male</td>
<td align="right">40.12</td>
<td align="right">69.54</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>Prepare data and model for the explainer:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># create a random forest model</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"randomForest"</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a>model &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/randomForest/man/randomForest.html">randomForest</a></span>(fired <span class="op">~</span>., <span class="dt">data =</span> train)</span>
<span id="cb2-4"><a href="#cb2-4"></a></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co"># prepare validation dataset</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>test &lt;-<span class="st"> </span>DALEX<span class="op">::</span>HR_test[<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>,]</span>
<span id="cb2-7"><a href="#cb2-7"></a>test<span class="op">$</span>fired &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(test<span class="op">$</span>status <span class="op">==</span><span class="st"> "fired"</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb2-8"><a href="#cb2-8"></a>test &lt;-<span class="st"> </span>test[,<span class="op">-</span><span class="dv">6</span>]</span>
<span id="cb2-9"><a href="#cb2-9"></a></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co"># create an explainer</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>explainer &lt;-<span class="st"> </span>DALEX<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/DALEX/man/explain.html">explain</a></span>(<span class="dt">model =</span> model,</span>
<span id="cb2-12"><a href="#cb2-12"></a>                            <span class="dt">data =</span> test[,<span class="op">-</span><span class="dv">6</span>],</span>
<span id="cb2-13"><a href="#cb2-13"></a>                            <span class="dt">y =</span> test[,<span class="dv">6</span>],</span>
<span id="cb2-14"><a href="#cb2-14"></a>                            <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</span>
<span id="cb2-15"><a href="#cb2-15"></a></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="co"># start modelStudio</span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"modelStudio"</span>)</span></code></pre></div>
<hr>
<div id="modelstudio-parameters" class="section level2">
<h2 class="hasAnchor">
<a href="#modelstudio-parameters" class="anchor"></a>modelStudio parameters</h2>
<div id="instance-explanations" class="section level3">
<h3 class="hasAnchor">
<a href="#instance-explanations" class="anchor"></a>instance explanations</h3>
<p>Pass data points to <code>new_observation</code> parameter for instance explanations such as Break Down, Shapley Values and Ceteris Paribus Profiles. Use <code>new_observation_y</code> to show their true labels.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>new_observation &lt;-<span class="st"> </span>test[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,]</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="kw"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(new_observation) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"John Snow"</span>, <span class="st">"Arya Stark"</span>, <span class="st">"Samwell Tarly"</span>)</span>
<span id="cb3-3"><a href="#cb3-3"></a>true_labels &lt;-<span class="st"> </span>test[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,<span class="dv">6</span>]</span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="kw"><a href="../reference/modelStudio.html">modelStudio</a></span>(explainer, <span class="dt">new_observation =</span> new_observation,</span>
<span id="cb3-6"><a href="#cb3-6"></a>                       <span class="dt">new_observation_y  =</span> true_labels)</span></code></pre></div>
</div>
<div id="grid-size" class="section level3">
<h3 class="hasAnchor">
<a href="#grid-size" class="anchor"></a>grid size</h3>
<p>Achieve bigger or smaller <code>modelStudio</code> grid with <code>facet_dim</code> parameter.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># small dashboard with 2 panels</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="kw"><a href="../reference/modelStudio.html">modelStudio</a></span>(explainer, new_observation, <span class="dt">facet_dim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co"># large dashboard with 9 panels</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="kw"><a href="../reference/modelStudio.html">modelStudio</a></span>(explainer, new_observation, <span class="dt">facet_dim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">3</span>,<span class="dv">3</span>))</span></code></pre></div>
</div>
<div id="animations" class="section level3">
<h3 class="hasAnchor">
<a href="#animations" class="anchor"></a>animations</h3>
<p>Manipulate <code>time</code> parameter to set animation length. Value 0 will make them invisible.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># slow down animations</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw"><a href="../reference/modelStudio.html">modelStudio</a></span>(explainer, new_observation, <span class="dt">time =</span> <span class="dv">1000</span>)</span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co"># turn off animations</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="kw"><a href="../reference/modelStudio.html">modelStudio</a></span>(explainer, new_observation, <span class="dt">time =</span> <span class="dv">0</span>)</span></code></pre></div>
</div>
<div id="more-calculations-means-more-time" class="section level3">
<h3 class="hasAnchor">
<a href="#more-calculations-means-more-time" class="anchor"></a>more calculations means more time</h3>
<p><code>N</code> is a number of observations used for calculation of partial and accumulated dependence profiles. <code>B</code> is a number of random paths used for calculation of shapley values profiles. Decrease <code>N</code> and <code>B</code> parameters to lower computation time or increase them to get more accurate empirical results.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw"><a href="../reference/modelStudio.html">modelStudio</a></span>(explainer, new_observation, <span class="dt">N =</span> <span class="dv">100</span>, <span class="dt">B =</span> <span class="dv">10</span>)</span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="kw"><a href="../reference/modelStudio.html">modelStudio</a></span>(explainer, new_observation, <span class="dt">N =</span> <span class="dv">1000</span>, <span class="dt">B =</span> <span class="dv">50</span>)</span></code></pre></div>
</div>
<div id="no-eda-mode" class="section level3">
<h3 class="hasAnchor">
<a href="#no-eda-mode" class="anchor"></a>no EDA mode</h3>
<p>Don’t compute the EDA plots if they are not needed. Set the <code>eda</code> parameter to <code>FALSE</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw"><a href="../reference/modelStudio.html">modelStudio</a></span>(explainer, new_observation, <span class="dt">eda =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
</div>
<div id="progress-bar" class="section level3">
<h3 class="hasAnchor">
<a href="#progress-bar" class="anchor"></a>progress bar</h3>
<p>Hide computation progress bar messages with <code>show_info</code> parameter.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw"><a href="../reference/modelStudio.html">modelStudio</a></span>(explainer, new_observation, <span class="dt">show_info =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
</div>
<div id="viewer-or-browser" class="section level3">
<h3 class="hasAnchor">
<a href="#viewer-or-browser" class="anchor"></a>viewer or browser?</h3>
<p>Change <code>viewer</code> parameter to set where to display <code>modelStudio</code>. Best described here: <a href="https://rstudio.github.io/r2d3/articles/visualization_options.html#viewer"><code>r2d3 viewer argument</code></a>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw"><a href="../reference/modelStudio.html">modelStudio</a></span>(explainer, new_observation, <span class="dt">viewer =</span> <span class="st">"browser"</span>)</span></code></pre></div>
<hr>
</div>
</div>
<div id="parallel-computation" class="section level2">
<h2 class="hasAnchor">
<a href="#parallel-computation" class="anchor"></a>parallel computation</h2>
<p>Speed up <code>modelStudio</code> computation by setting <code>parallel</code> parameter to <code>TRUE</code>. It uses <a href="https://www.rdocumentation.org/packages/parallelMap"><code>parallelMap</code></a> package to calculate local explainers faster. It is really useful when using <code>modelStudio</code> with complicated models, vast datasets or simply many observations are being processed.</p>
<p>All options can be set outside of function call. More on that <a href="https://github.com/berndbischl/parallelMap#being-lazy-configuration">here</a>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co">#set up the cluster </span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="kw"><a href="https://rdrr.io/r/base/options.html">options</a></span>(</span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="dt">parallelMap.default.mode        =</span> <span class="st">"socket"</span>,</span>
<span id="cb10-4"><a href="#cb10-4"></a>  <span class="dt">parallelMap.default.cpus        =</span> <span class="dv">4</span>,</span>
<span id="cb10-5"><a href="#cb10-5"></a>  <span class="dt">parallelMap.default.show.info   =</span> <span class="ot">FALSE</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>)</span>
<span id="cb10-7"><a href="#cb10-7"></a></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co"># calculations will be distributed into 4 cores</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="kw"><a href="../reference/modelStudio.html">modelStudio</a></span>(explainer, <span class="dt">new_observation =</span> test[<span class="dv">1</span><span class="op">:</span><span class="dv">16</span>,], <span class="dt">parallel =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<hr>
</div>
<div id="plot-options" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-options" class="anchor"></a>plot options</h2>
<p>Customize some of <code>modelStudio</code> looks by overwriting default options returned by <code><a href="../reference/modelStudioOptions.html">modelStudioOptions()</a></code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># set additional graphical parameters</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>new_options &lt;-<span class="st"> </span><span class="kw"><a href="../reference/modelStudioOptions.html">modelStudioOptions</a></span>(</span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="dt">show_subtitle =</span> <span class="ot">TRUE</span>,</span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="dt">bd_subtitle =</span> <span class="st">"Hello World"</span>,</span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="dt">line_size =</span> <span class="dv">5</span>,</span>
<span id="cb11-6"><a href="#cb11-6"></a>  <span class="dt">point_size =</span> <span class="dv">9</span>,</span>
<span id="cb11-7"><a href="#cb11-7"></a>  <span class="dt">line_color =</span> <span class="st">"pink"</span>,</span>
<span id="cb11-8"><a href="#cb11-8"></a>  <span class="dt">point_color =</span> <span class="st">"purple"</span>,</span>
<span id="cb11-9"><a href="#cb11-9"></a>  <span class="dt">bd_positive_color =</span> <span class="st">"yellow"</span>,</span>
<span id="cb11-10"><a href="#cb11-10"></a>  <span class="dt">bd_negative_color =</span> <span class="st">"orange"</span> </span>
<span id="cb11-11"><a href="#cb11-11"></a>)</span>
<span id="cb11-12"><a href="#cb11-12"></a></span>
<span id="cb11-13"><a href="#cb11-13"></a><span class="kw"><a href="../reference/modelStudio.html">modelStudio</a></span>(explainer, new_observation, <span class="dt">options =</span> new_options)</span></code></pre></div>
<hr>
</div>
<div id="r-mlr-model" class="section level2">
<h2 class="hasAnchor">
<a href="#r-mlr-model" class="anchor"></a>R mlr model</h2>
<p>Use <code>DALEXtra::explain_*()</code> functions to explain various models. Bellow basic example of making <code>modelStudio</code> for mlr model using <code>DALEXtra::explain_mlr()</code></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(DALEXtra)</span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(mlr)</span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co"># prepare mlr model</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>task &lt;-<span class="st"> </span>mlr<span class="op">::</span><span class="kw">makeRegrTask</span>(<span class="dt">id =</span> <span class="st">"task"</span>,</span>
<span id="cb12-6"><a href="#cb12-6"></a>                          <span class="dt">data =</span> train,</span>
<span id="cb12-7"><a href="#cb12-7"></a>                          <span class="dt">target =</span> <span class="st">"fired"</span>)</span>
<span id="cb12-8"><a href="#cb12-8"></a></span>
<span id="cb12-9"><a href="#cb12-9"></a>learner &lt;-<span class="st"> </span>mlr<span class="op">::</span><span class="kw">makeLearner</span>(<span class="st">"regr.randomForest"</span>,</span>
<span id="cb12-10"><a href="#cb12-10"></a>                            <span class="dt">par.vals =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">ntree =</span> <span class="dv">300</span>),</span>
<span id="cb12-11"><a href="#cb12-11"></a>                            <span class="dt">predict.type =</span> <span class="st">"response"</span>)</span>
<span id="cb12-12"><a href="#cb12-12"></a></span>
<span id="cb12-13"><a href="#cb12-13"></a>model &lt;-<span class="st"> </span>mlr<span class="op">::</span><span class="kw">train</span>(learner, task)</span>
<span id="cb12-14"><a href="#cb12-14"></a></span>
<span id="cb12-15"><a href="#cb12-15"></a><span class="co"># create an explainer for mlr model</span></span>
<span id="cb12-16"><a href="#cb12-16"></a>explainer_mlr &lt;-<span class="st"> </span><span class="kw">explain_mlr</span>(model, <span class="dt">data =</span> test[,<span class="op">-</span><span class="dv">6</span>], <span class="dt">y =</span> test[,<span class="dv">6</span>], <span class="dt">label =</span> <span class="st">"mlr"</span>)</span>
<span id="cb12-17"><a href="#cb12-17"></a></span>
<span id="cb12-18"><a href="#cb12-18"></a><span class="co"># call model studio for mlr model</span></span>
<span id="cb12-19"><a href="#cb12-19"></a><span class="kw"><a href="../reference/modelStudio.html">modelStudio</a></span>(explainer_mlr,</span>
<span id="cb12-20"><a href="#cb12-20"></a>            new_observation,</span>
<span id="cb12-21"><a href="#cb12-21"></a>            <span class="dt">N =</span> <span class="dv">100</span>, <span class="dt">B =</span> <span class="dv">10</span>)</span></code></pre></div>
<hr>
</div>
<div id="python-scikit-learn-model" class="section level2">
<h2 class="hasAnchor">
<a href="#python-scikit-learn-model" class="anchor"></a>Python scikit-learn model</h2>
<p>Bellow basic example of making <code>modelStudio</code> for <strong>scikit-learn</strong> model using <code>DALEXtra::explain_scikitlearn()</code> and <strong>Python Anaconda</strong>. Save your Python model as a <code>.pkl</code> file and explain it in <strong>R</strong> with few lines of code. Here we use a demo model saved in <code>DALEXtra</code> package.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(DALEXtra)</span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(modelStudio)</span>
<span id="cb13-3"><a href="#cb13-3"></a></span>
<span id="cb13-4"><a href="#cb13-4"></a>titanic_test &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"titanic_test.csv"</span>, <span class="dt">package =</span> <span class="st">"DALEXtra"</span>)) </span>
<span id="cb13-5"><a href="#cb13-5"></a>titanic_train &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"titanic_train.csv"</span>, <span class="dt">package =</span> <span class="st">"DALEXtra"</span>))</span>
<span id="cb13-6"><a href="#cb13-6"></a></span>
<span id="cb13-7"><a href="#cb13-7"></a><span class="co"># read scikitlearn model</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>yml &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"scikitlearn.yml"</span>, <span class="dt">package =</span> <span class="st">"DALEXtra"</span>)</span>
<span id="cb13-9"><a href="#cb13-9"></a>pkl_gbm &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"scikitlearn.pkl"</span>, <span class="dt">package =</span> <span class="st">"DALEXtra"</span>)</span>
<span id="cb13-10"><a href="#cb13-10"></a>pkl_SGDC &lt;-<span class="st"> "SGDC.pkl"</span></span>
<span id="cb13-11"><a href="#cb13-11"></a></span>
<span id="cb13-12"><a href="#cb13-12"></a><span class="co"># prepare an explainer for scikitlearn model</span></span>
<span id="cb13-13"><a href="#cb13-13"></a>explainer_scikit &lt;-<span class="st"> </span><span class="kw">explain_scikitlearn</span>(pkl_gbm,</span>
<span id="cb13-14"><a href="#cb13-14"></a>                                        <span class="dt">yml =</span> yml,</span>
<span id="cb13-15"><a href="#cb13-15"></a>                                        <span class="dt">data =</span> titanic_test[,<span class="dv">1</span><span class="op">:</span><span class="dv">17</span>],</span>
<span id="cb13-16"><a href="#cb13-16"></a>                                        <span class="dt">y =</span> titanic_test[,<span class="dv">18</span>],</span>
<span id="cb13-17"><a href="#cb13-17"></a>                                        <span class="dt">label =</span> <span class="st">"python-gbm"</span>)</span>
<span id="cb13-18"><a href="#cb13-18"></a></span>
<span id="cb13-19"><a href="#cb13-19"></a><span class="co"># start model studio</span></span>
<span id="cb13-20"><a href="#cb13-20"></a>ms &lt;-<span class="st"> </span><span class="kw"><a href="../reference/modelStudio.html">modelStudio</a></span>(explainer_scikit,</span>
<span id="cb13-21"><a href="#cb13-21"></a>                  <span class="dt">new_observation =</span> titanic_test[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">17</span>],</span>
<span id="cb13-22"><a href="#cb13-22"></a>                  <span class="dt">options =</span> <span class="kw"><a href="../reference/modelStudioOptions.html">modelStudioOptions</a></span>(<span class="dt">margin_left =</span> <span class="dv">160</span>))</span>
<span id="cb13-23"><a href="#cb13-23"></a></span>
<span id="cb13-24"><a href="#cb13-24"></a>ms</span>
<span id="cb13-25"><a href="#cb13-25"></a></span>
<span id="cb13-26"><a href="#cb13-26"></a>r2d3<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/r2d3/man/save_d3_html.html">save_d3_html</a></span>(ms, <span class="st">"modelStudio-python-gbm.html"</span>)</span></code></pre></div>
<p><code>modelStudio</code> should work with any <code>explainer</code> class object. Find more about making those <a href="https://modeloriented.github.io/DALEXtra/reference/">here</a>.</p>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<ul>
<li>Wrapper for the function is implemented in <a href="https://modeloriented.github.io/DALEX/">DALEX</a>
</li>
<li>Feature Importance, Ceteris Paribus, Partial Dependence and Accumulated Dependence plots are implemented in <a href="https://modeloriented.github.io/ingredients/">ingredients</a>
</li>
<li>Break Down and Shapley Values plots are implemented in <a href="https://modeloriented.github.io/iBreakDown/">iBreakDown</a>
</li>
<li>Python wrappers and more can be found in <a href="https://modeloriented.github.io/DALEXtra/">DALEXtra</a>
</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="author">
  <p>
    Developed by Hubert Baniecki, Przemyslaw Biecek.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  


  </body>
</html>
